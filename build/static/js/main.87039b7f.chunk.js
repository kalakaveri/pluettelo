(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(15),c=t.n(a),r=t(6),u=t(3),i=t(1),o=t(0),l=function(e){var n=e.handleChange;return Object(o.jsxs)(o.Fragment,{children:["filter shown with",Object(o.jsx)("input",{id:"filter",onChange:n})]})},s=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"error",children:n})},d=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"pass",children:n})},f=function(e){var n=e.addName,t=e.newName,a=e.handleNameChange,c=e.newNumber,r=e.handleNumberChange;return Object(o.jsxs)("form",{onSubmit:n,children:[Object(o.jsxs)("div",{children:["name:",Object(o.jsx)("input",{value:t,onChange:a})]}),Object(o.jsxs)("div",{children:["number:",Object(o.jsx)("input",{value:c,onChange:r})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},j=t(4),b=t.n(j),h="/api/persons",m=function(){return b.a.get(h).then((function(e){return e.data}))},O=function(e){return b.a.post(h,e).then((function(e){return e.data}))},v=function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return b.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},x=function(e){var n=e.value,t=e.text,a=e.handleClick;return Object(o.jsx)("button",{value:n,onClick:a,children:t})},g=function(e){var n=e.name,t=e.number;return Object(o.jsxs)(o.Fragment,{children:[" ",n," ",t]})},w=function(e){var n=e.list,t=e.filter,a=e.handleClick,c=n;t&&(c=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})));return Object(o.jsx)("div",{children:c.map((function(e,n){return Object(o.jsxs)("p",{children:[Object(o.jsx)(g,{name:e.name,number:e.number,changeNumber:function(e){}}),Object(o.jsx)(x,{handleClick:a,value:e.name,text:"delete"})]},n)}))})},C=function(){var e=Object(i.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],c=Object(i.useState)(""),j=Object(u.a)(c,2),b=j[0],h=j[1],x=Object(i.useState)(""),g=Object(u.a)(x,2),C=g[0],N=g[1],k=Object(i.useState)(""),S=Object(u.a)(k,2),D=S[0],T=S[1],y=Object(i.useState)(null),E=Object(u.a)(y,2),F=E[0],J=E[1],L=Object(i.useState)(null),P=Object(u.a)(L,2),B=P[0],I=P[1];Object(i.useEffect)((function(){m().then((function(e){return a(e)}))}),[]);return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Phonebook"}),Object(o.jsx)(d,{message:B}),Object(o.jsx)(s,{message:F}),Object(o.jsx)(l,{handleChange:function(e){e.preventDefault(),h(e.target.value)}}),Object(o.jsx)("h3",{children:"add a new"}),Object(o.jsx)(f,{addName:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===C}));if(n&&n.length>0){if(window.confirm("".concat(C," is already added to phonebook,\n        replace the old number with a new one?"))){var c=t.find((function(e){return e.name===C})).id,u=t.find((function(e){return e.id===c})),i=Object(r.a)(Object(r.a)({},u),{},{number:D});v(c,i).then((function(e){a(t.map((function(n){return n.id!==c?n:e}))),N(""),T(""),I("".concat(e.name," has been updated")),setTimeout((function(){I(null)}),5e3)})).catch((function(e){J("Error: ".concat(C," can not be updated")),a(t.filter((function(e){return e.id!==c})))}))}}else O({name:C,number:D}).then((function(e){a(t.concat(e)),N(""),T(""),I("".concat(e.name," has been added")),setTimeout((function(){I(null)}),5e3)})).catch((function(e){J("Error: ".concat(C,": ").concat(D," could not be added")),setTimeout((function(){return J(null)}),5e3),a(t)}))},newName:C,handleNameChange:function(e){e.preventDefault(),N(e.target.value)},newNumber:D,handleNumberChange:function(e){e.preventDefault(),T(e.target.value)}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(w,{list:t,filter:b,handleClick:function(e){e.preventDefault();var n=e.target.value;if(window.confirm("Delete ".concat(e.target.value))){var c=t.find((function(n){return n.name===e.target.value})).id;p(c).then((function(e){a(t.filter((function(e){return e.id!==c}))),I("".concat(n," was deleted")),setTimeout((function(){I(null)}),5e3)})).catch((function(n){J("Person ".concat(e.target.value," was already removed from server")),setTimeout((function(){J(null)}),5e3),a(t.map((function(e){return e.id!==c})))}))}}})]})};t(39);c.a.render(Object(o.jsx)(C,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.87039b7f.chunk.js.map